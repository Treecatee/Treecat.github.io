{"title":"Python-模块和包","date":"2019-03-03T10:28:06.000Z","thumbnail":"https://i.loli.net/2019/03/03/5c7b72e96a73f.jpg","slug":"Python-Modules-Packages","tags":["Python语言"],"categories":["Python"],"updated":"2019-03-05T17:28:51.745Z","content":"<p>from…import…😀<br><a id=\"more\"></a></p>\n<p><br></p>\n<p><br></p>\n<center><font color=\"#00B2EE\" face=\"Comic sans MS\" size=\"5\"><strong>模块和包</strong></font> </center>\n\n<p><br></p>\n<p><br></p>\n<h3 id=\"一-模块与包的意义\"><a href=\"#一-模块与包的意义\" class=\"headerlink\" title=\"一. 模块与包的意义\"></a><font color=\"#FF6347\" face=\"Comic sans MS\">一. 模块与包的意义</font></h3><p><br></p>\n<h4 id=\"1-1-什么是模块？\"><a href=\"#1-1-什么是模块？\" class=\"headerlink\" title=\"1.1 什么是模块？\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">1.1 什么是模块？</font></h4><blockquote>\n<font color=\"#FF7F00\" face=\"Microsoft YaHei\"><strong>在Python中，一个.py文件就称之为一个模块（Module）。</strong></font>\n</blockquote>\n<p><br></p>\n<h4 id=\"1-2-为什么要使用模块？\"><a href=\"#1-2-为什么要使用模块？\" class=\"headerlink\" title=\"1.2 为什么要使用模块？\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">1.2 为什么要使用模块？</font></h4><ul>\n<li><font face=\"Microsoft YaHei\">为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。</font>\n\n\n</li>\n</ul>\n<ul>\n<li><font face=\"Microsoft YaHei\">随着程序的发展，功能越来越多，为了方便管理，我们通常将程序分成一个个的文件，这样做程序的结构更清晰，方便管理。这时我们不仅仅可以把这些文件当做脚本去执行，还可以把他们当做模块来导入到其他的模块中，实现了功能的重复利用。</font>\n\n\n</li>\n</ul>\n<ul>\n<li><font face=\"Microsoft YaHei\">我们在编写程序的时候，也经常引用其他模块，包括Python内置的模块和来自第三方的模块。</font>\n\n\n</li>\n</ul>\n<ul>\n<li><font face=\"Microsoft YaHei\">使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。但是也要注意，尽量不要与内置函数名字冲突。</font>\n\n\n\n</li>\n</ul>\n<p><br></p>\n<h4 id=\"1-3-什么是包？\"><a href=\"#1-3-什么是包？\" class=\"headerlink\" title=\"1.3 什么是包？\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">1.3 什么是包？</font></h4><ol>\n<li><font face=\"Microsoft YaHei\">如果不同的人编写的模块名相同怎么办？为了避免模块名冲突，Python又引入了按目录（文件夹）来组织模块的方法，称为包（Package）。</font>\n\n\n</li>\n</ol>\n<ol start=\"2\">\n<li><font face=\"Microsoft YaHei\">包是目录级的（文件夹级），文件夹是用来组成py文件（包的本质就是一个包含<code>__init__.py</code>文件的目录）</font>\n\n\n</li>\n</ol>\n<ol start=\"3\">\n<li><font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong>每一个包目录下面都会有一个 <code>__init__.py</code> 的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录，而不是一个包</strong></font>。它可以是空文件，也可以有Python代码，因为 <code>__init__.py</code> 本身就是一个模块。</font>\n\n\n</li>\n</ol>\n<ol start=\"4\">\n<li><font face=\"Microsoft YaHei\">import导入文件时，产生名称空间中的名字来源于文件，import 包，产生的名称空间的名字同样来源于文件，即包下的 <code>__init__.py</code> ，<font color=\"#FF7F00\"><strong>导入包本质就是在导入该文件</strong></font>。</font>\n\n\n</li>\n</ol>\n<ol start=\"5\">\n<li><font face=\"Microsoft YaHei\">文件夹里面还可以包含文件夹（可以有多级目录，组成多级层次的包结构）。但是每一个文件夹下面必须有一个 <code>__init__.py</code> 文件。</font>\n\n\n</li>\n</ol>\n<ol start=\"6\">\n<li><font face=\"Microsoft YaHei\">自己创建模块时要注意命名，不能和Python自带的模块名称冲突。例如，系统自带了sys模块，自己的模块就不可命名为sys.py，否则将无法导入系统自带的sys模块。</font>\n\n\n</li>\n</ol>\n<p><br></p>\n<font face=\"Comic sans MS\"><strong>举例说明：</strong></font>\n\n<p>有个包按照如下目录存放文件：</p>\n<p>mycompany<br>├─ __init__.py<br>├─ abc.py<br>└─ xyz.py</p>\n<blockquote>\n<font face=\"Microsoft YaHei\">引入了包以后，只要顶层的包名不与别人冲突，那所有模块都不会与别人冲突。现在，<strong><code>abc.py</code></strong> 模块的名字就变成了 <strong><code>mycompany.abc</code></strong> ，类似的，<strong><code>xyz.py</code></strong> 的模块名变成了 <strong><code>mycompany.xyz</code></strong> 。</font>\n</blockquote>\n<p><br></p>\n<p>类似的，可以有多级目录，组成多级层次的包结构。比如如下的目录结构：</p>\n<p>mycompany<br> ├─ web<br> │  ├─ __init__.py<br> │  ├─ utils.py<br> │  └─ <a href=\"http://www.py\" target=\"_blank\" rel=\"noopener\">www.py</a><br> ├─ __init__.py<br> ├─ abc.py<br> └─ xyz.py</p>\n<blockquote>\n<font face=\"Microsoft YaHei\">文件<code>www.py</code> 的模块名就是<code>mycompany.web.www</code>，两个文件utils.py的模块名分别是<code>mycompany.utils</code>和 <code>mycompany.web.utils</code></font>\n</blockquote>\n<p><br></p>\n<font color=\"#00B2EE\" face=\"Comic sans MS\"><strong>总结</strong><br></font>\n\n\n<font face=\"Microsoft YaHei\">模块是一组Python代码的集合，可以使用其他模块，也可以被其他模块使用。<br></font>\n\n<blockquote>\n<font color=\"#FF7F00\" face=\"Microsoft YaHei\"><strong>创建自己的模块时，要注意：</strong></font><br>1. <font face=\"Microsoft YaHei\"> 模块名要遵循Python变量命名规范，不要使用中文、特殊字符；</font><br>2. <font face=\"Microsoft YaHei\">模块名不要和系统模块名冲突，最好先查看系统是否已存在该模块，检查方法是在Python交互环境执行import abc，若成功则说明系统存在此模块。</font>\n</blockquote>\n<p><br></p>\n<p><br></p>\n<h3 id=\"二-使用模块-无包组织\"><a href=\"#二-使用模块-无包组织\" class=\"headerlink\" title=\"二. 使用模块 -- 无包组织\"></a><font color=\"#FF6347\" face=\"Comic sans MS\">二. 使用模块 -- 无包组织</font></h3><p><br></p>\n<blockquote>\n<font color=\"#FF7F00\"><strong>使用模块的几种语句：</strong></font><br>1. <font face=\"Microsoft YaHei\"><strong>import 语句：</strong> <strong><code>import module1[, module2[,... moduleN]</code></strong></font><br>2. <font face=\"Microsoft YaHei\"><strong>from … import 语句：</strong> <strong><code>from  modname import  name1[, name2[, ... nameN]]</code></strong> </font><br>3. <font face=\"Microsoft YaHei\"><strong>from … import * 语句：</strong> <strong><code>from  modname import *</code></strong></font><br>4. <font face=\"Microsoft YaHei\"><strong>__name__属性：</strong> 用来分清该模块是调用者还是被其他模块调用。</font><br>5. <font face=\"Microsoft YaHei\"><strong>dir() 函数：</strong> 用来查找模块中定义的名字，返回一个有序字符串列表。</font>\n</blockquote>\n<p><br></p>\n<h4 id=\"2-1-import-语句\"><a href=\"#2-1-import-语句\" class=\"headerlink\" title=\"2.1 import 语句\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">2.1 import 语句</font></h4><font face=\"Microsoft YaHei\">想使用 Python 源文件，只需在另一个源文件里执行 import 语句，语法如下：</font>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> module1[, module2[,... moduleN]</span><br></pre></td></tr></table></figure>\n<ol>\n<li><font face=\"Microsoft YaHei\">使用 Python 源文件，只需在另一个源文件里执行 import 语句。</font>\n</li>\n<li><font face=\"Microsoft YaHei\">一个模块只会被导入一次，不管你执行了多少次import。这样可以防止导入模块被一遍又一遍地执行。</font>\n</li>\n<li><font face=\"Microsoft YaHei\">调用者引用模块后可以：<code>模块名.函数名(参数)</code>来使用。</font>\n\n\n</li>\n</ol>\n<p><br></p>\n<p>举例说明：<br>当解释器遇到 import 语句，如果模块在当前的搜索路径就会被导入。如想要导入模块 support，需要把命令放在脚本的顶端：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">support.py 文件代码</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">print_func</span><span class=\"params\">( par )</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> (<span class=\"string\">\"Hello : \"</span>, par)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">test.py 文件代码</span><br><span class=\"line\"><span class=\"comment\"># 导入模块</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> support</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 现在可以调用模块里包含的函数了</span></span><br><span class=\"line\">support.print_func(<span class=\"string\">\"Runoob\"</span>)</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">运行test.py实例输出结果：</span><br><span class=\"line\">Hello :  Runoob</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"2-2-from-…-import-语句\"><a href=\"#2-2-from-…-import-语句\" class=\"headerlink\" title=\"2.2 from … import 语句\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">2.2 from … import 语句</font></h4><font face=\"Microsoft YaHei\">Python 的 from 语句让你从模块中导入一个指定的部分到当前命名空间中，<strong>这种访问函数时可以直接使用函数名而不需要前缀</strong>，语法如下：</font>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> modname <span class=\"keyword\">import</span> name1[, name2[, ... nameN]]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>举例说明：<br>例如，要导入模块 fibo 的 fib 函数，使用如下语句：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fibo.py</span><br><span class=\"line\"><span class=\"comment\"># 斐波那契(fibonacci)数列模块</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fib</span><span class=\"params\">(n)</span>:</span>    <span class=\"comment\"># 定义到 n 的斐波那契数列</span></span><br><span class=\"line\">    a, b = <span class=\"number\">0</span>, <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> b &lt; n:</span><br><span class=\"line\">        print(b, end=<span class=\"string\">' '</span>)</span><br><span class=\"line\">        a, b = b, a+b</span><br><span class=\"line\">    print()   //输出为<span class=\"literal\">None</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fib2</span><span class=\"params\">(n)</span>:</span> <span class=\"comment\"># 返回到 n 的斐波那契数列</span></span><br><span class=\"line\">    result = []</span><br><span class=\"line\">    a, b = <span class=\"number\">0</span>, <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> b &lt; n:</span><br><span class=\"line\">        result.append(b)</span><br><span class=\"line\">        a, b = b, a+b</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">test.py</span><br><span class=\"line\"><span class=\"keyword\">from</span> fibo <span class=\"keyword\">import</span> fib, fib2</span><br><span class=\"line\">print(fib(<span class=\"number\">500</span>))</span><br><span class=\"line\">print(fib2(<span class=\"number\">500</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">运行结果：</span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">8</span> <span class=\"number\">13</span> <span class=\"number\">21</span> <span class=\"number\">34</span> <span class=\"number\">55</span> <span class=\"number\">89</span> <span class=\"number\">144</span> <span class=\"number\">233</span> <span class=\"number\">377</span></span><br><span class=\"line\"><span class=\"literal\">None</span></span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">13</span>, <span class=\"number\">21</span>, <span class=\"number\">34</span>, <span class=\"number\">55</span>, <span class=\"number\">89</span>, <span class=\"number\">144</span>, <span class=\"number\">233</span>, <span class=\"number\">377</span>]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"2-3-from-…-import-语句\"><a href=\"#2-3-from-…-import-语句\" class=\"headerlink\" title=\"2.3 from … import * 语句\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">2.3 from … import * 语句</font></h4><ul>\n<li><font face=\"Microsoft YaHei\">这提供了一个简单的方法来导入一个模块中的所有项目。然而这种声明不该被过多地使用。</font>\n</li>\n<li><font face=\"Microsoft YaHei\">这种方法，可以一次性的把模块中的所有（函数，变量）名称都导入到当前模块的字符表。</font>\n</li>\n<li><font face=\"Microsoft YaHei\">这将把所有的名字都导入进来，但是那些由单一下划线（_）开头的名字不在此例。大多数情况， Python程序员不使用这种方法，因为引入的其它来源的命名，很可能覆盖了已有的定义。</font>\n\n\n</li>\n</ul>\n<p><br></p>\n<p>把一个模块的所有内容全都导入到当前的命名空间也是可行的，只需使用如下声明：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> modname <span class=\"keyword\">import</span> *</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p><br></p>\n<h3 id=\"三-使用模块-有包组织\"><a href=\"#三-使用模块-有包组织\" class=\"headerlink\" title=\"三. 使用模块 -- 有包组织\"></a><font color=\"#FF6347\" face=\"Comic sans MS\">三. 使用模块 -- 有包组织</font></h3><ul>\n<li><font face=\"Microsoft YaHei\">目录只有包含一个叫做 <code>__init__.py</code> 的文件才会被认作是一个包，主要是为了避免一些滥俗的名字（比如叫做 string）不小心的影响搜索路径中的有效模块。</font>\n</li>\n<li><font face=\"Microsoft YaHei\">最简单的情况，放一个空的 <code>__init__.py</code>就可以了。当然这个文件中也可以包含一些初始化代码或者为（将在后面介绍的） <code>__all__</code>变量赋值。</font>\n\n\n</li>\n</ul>\n<p><br></p>\n<font color=\"#00B2EE\" face=\"Comic sans MS\">1. <strong>import 语句：</strong></font>\n\n<p>用户可以每次只导入一个包里面的特定模块，他必须使用全名去访问:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> 包名.子包名.模块名                 导入模块</span><br><span class=\"line\"></span><br><span class=\"line\">包名.子包名.模块名 .函数名(参数)           使用模块</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<font color=\"#00B2EE\" face=\"Comic sans MS\">2. <strong>import …from 语句：</strong></font>    \n\n<p>同样会导入子模块，他不需要那些冗长的前缀，只需要<code>模块名.函数名(参数)</code>即可，推荐使用！</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> 包名.子包名 <span class=\"keyword\">import</span> 模块名           导入模块</span><br><span class=\"line\"></span><br><span class=\"line\">模块名.函数名(参数)                      使用模块</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<font color=\"#00B2EE\" face=\"Comic sans MS\">3. <strong>import …from 语句：</strong></font>\n\n<p>还有一种变化就是直接导入一个函数或者变量:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> 包名.子包名.模块名  <span class=\"keyword\">import</span> 函数名      导入模块</span><br><span class=\"line\">函数名(参数)                               使用模块</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p><br></p>\n<font color=\"#00B2EE\" face=\"Comic sans MS\">4. <strong>import …from * 语句：</strong></font>\n\n<blockquote>\n<font color=\"red\" face=\"Comic sans MS\" size=\"4\"><strong>注意：这种导入方法必须要注意<code>__init__.py</code>里面的属性<code>__all__</code>已经设置好。<code>__all__</code>是用于控制from…import *</strong><br></font>\n</blockquote>\n<font face=\"Microsoft YaHei\">Python 会进入文件系统，找到这个包里面所有的子模块，一个一个的把它们都导入进来。但是很不幸，这个方法在 Windows平台上工作的就不是非常好，因为Windows是一个大小写不区分的系统。</font>\n\n<font face=\"Microsoft YaHei\">在这类平台上，没有人敢担保一个叫做 ECHO.py 的文件导入为模块 echo 还是 Echo 甚至 ECHO。</font>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> 包名.子包名 <span class=\"keyword\">import</span> *                 导入所有模块</span><br><span class=\"line\">模块名.函数名(参数)                        使用模块</span><br></pre></td></tr></table></figure>\n<p><strong>具体使用方法请看下面章节四。</strong></p>\n<p><br></p>\n<blockquote>\n<p><font color=\"#FF7F00\" face=\"Microsoft YaHei\"><strong>总结使用时注意事项：</strong></font></p>\n<ol>\n<li><font face=\"Microsoft YaHei\">注意当使用<code>from package import item</code>这种形式的时候，对应的<font color=\"#FF7F00\"><strong>item既可以是包里面的子模块（子包），或者包里面定义的其他名称，比如函数，类或者变量</strong></font>。</font></li>\n<li><font face=\"Microsoft YaHei\">import语法会首先把item当作一个包定义的名称，如果没找到，再试图按照一个模块去导入。如果还没找到，恭喜，一个:exc:ImportError 异常被抛出了。</font></li>\n<li><font face=\"Microsoft YaHei\">反之，如果使用形如<code>import item.subitem.subsubitem</code>这种导入形式，<font color=\"#FF7F00\"><strong>最后一项可以是包或者模块（不可以是类，函数或者变量的名字），除了最后一项，都必须是包。</strong></font>。</font></li>\n</ol>\n</blockquote>\n<p><br></p>\n<p><br></p>\n<h3 id=\"四-init-、-all-、-name-、-author-、-doc-、dir-函数\"><a href=\"#四-init-、-all-、-name-、-author-、-doc-、dir-函数\" class=\"headerlink\" title=\"四. __init__、__all__、__name__、__author__、__doc__、dir()函数\"></a><font color=\"#FF6347\" face=\"Comic sans MS\">四. __init__、__all__、__name__、__author__、__doc__、dir()函数</font></h3><p><br></p>\n<h4 id=\"4-1-init-、-all\"><a href=\"#4-1-init-、-all\" class=\"headerlink\" title=\"4.1 __init__、__all__\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">4.1 __init__、__all__</font></h4><font face=\"Microsoft YaHei\">在使用<code>from 包名.子包名 import \\* 语句</code>时必须修改<code>__init__.py</code>文件的<code>__all__</code>    列表变量。</font>\n\n<blockquote>\n<ol>\n<li><font face=\"Microsoft YaHei\">如果包定义文件 <code>__init__.py</code> 存在一个叫做 <code>__all__</code>     的列表变量，那么在使用 <code>from package import *</code>的时候就把这个列表中的所有名字作为包内容导入。</font></li>\n<li><font face=\"Microsoft YaHei\">作为包的作者，可别忘了在更新包之后保证 <code>__all__</code>     也更新了啊。你说我就不这么做，我就不使用导入<code>*</code>这种用法，好吧，没问题。这里有一个例子</font></li>\n<li><font face=\"Microsoft YaHei\">这表示当你使用<code>from sound.effects import *</code>这种用法时，你只会导入如下包里面这三个子模块。即这种语法导入的是<code>__all__</code>指定的模块。</font></li>\n<li><font face=\"Microsoft YaHei\">在python3中，即使包下没有<code>__init__.py</code>文件，import 包仍然不会报错，而在python2中，包下一定要有该文件，否则import 包报错</font></li>\n<li><font face=\"Microsoft YaHei\">import导入文件时，产生名称空间中的名字来源于文件，import 包，产生的名称空间的名字同样来源于文件，即包下的<code>__init__.py</code>，导入包本质就是在导入该文件。</font>\n</li>\n</ol>\n</blockquote>\n<p><br><br>上述的例子：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">__all__ = [<span class=\"string\">\"echo\"</span>, <span class=\"string\">\"surround\"</span>, <span class=\"string\">\"reverse\"</span>]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"4-1-name-、-main\"><a href=\"#4-1-name-、-main\" class=\"headerlink\" title=\"4.1 __name__、__main__\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">4.1 __name__、__main__</font></h4><ol>\n<li><font face=\"Microsoft YaHei\">__name__是一个变量。前后加了爽下划线是因为是因为这是系统定义的名字。普通变量不要使用此方式命名变量。</font>\n</li>\n<li><p><font face=\"Microsoft YaHei\">__name__就是标识模块的名字的一个系统变量。这里分两种情况：</font></p>\n<ol>\n<li><font face=\"Microsoft YaHei\">假如当前模块是主模块（也就是调用其他模块的模块），那么此模块名字就是<strong>main</strong>，即__name__==__main__。可以执行后面的内容；</font></li>\n<li><font face=\"Microsoft YaHei\">假如此模块是被import的，其值为被调用模块所属的路径。</font></li>\n</ol>\n</li>\n</ol>\n<p><br></p>\n<p>下面举一个例子：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test1.py</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">   print(<span class=\"string\">'程序自身在运行'</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">   print(<span class=\"string\">'我来自另一模块'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">test2.py</span><br><span class=\"line\"><span class=\"keyword\">import</span> test1</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\">运行test2.py输出结果：</span><br><span class=\"line\">我来自另一模块</span><br><span class=\"line\"></span><br><span class=\"line\">运行test1.py输出结果：</span><br><span class=\"line\">程序自身在运行</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"4-3-author-、-doc\"><a href=\"#4-3-author-、-doc\" class=\"headerlink\" title=\"4.3 __author__、__doc__\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">4.3 __author__、__doc__</font></h4><font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong>文档注释：</strong></font>任何模块代码的第一个字符串都被视为模块的文档注释；</font>\n\n<font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong><code>__doc__</code>：</strong></font>可以访问一个文件中的第一个单引号（1、2、3对）、双引号（1、2、3对）注释的文档。</font>\n\n<font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong><code>__author__</code>：</strong></font>可以将一个文件的作者名字赋给它。</font>\n\n<p><br></p>\n<p>应用示例如下：</p>\n<font color=\"#FF7F00\"></font>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">' a test module '</span> </span><br><span class=\"line\"><span class=\"string\">'fgbhjknml'</span></span><br><span class=\"line\"></span><br><span class=\"line\">__author__ = <span class=\"string\">'Directoree'</span></span><br><span class=\"line\"></span><br><span class=\"line\">a = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(a)</span><br><span class=\"line\">print(__doc__)</span><br><span class=\"line\">print(__doc__)</span><br><span class=\"line\">print(__author__)</span><br><span class=\"line\"></span><br><span class=\"line\">运行结果：</span><br><span class=\"line\"><span class=\"number\">10</span></span><br><span class=\"line\"> a test module</span><br><span class=\"line\"> a test module</span><br><span class=\"line\">Directoree</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"4-4-dir-函数\"><a href=\"#4-4-dir-函数\" class=\"headerlink\" title=\"4.4 dir()函数\"></a><font color=\"#3CB371\" face=\"Comic sans MS\">4.4 dir()函数</font></h4><blockquote>\n<font face=\"Microsoft YaHei\">内置的函数 dir() 可以<font color=\"#FF7F00\"><strong>找到模块内定义的所有名称。以一个字符串列表的形式返回</strong></font> 。</font><br><font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong>无参数：</strong></font> 只能列举当前模块已经被定义的名字；</font><br><font face=\"Microsoft YaHei\"><font color=\"#FF7F00\"><strong>有参数：</strong></font> 参数只能是已经引用的模块名字，不能为自身名字，否则会报错。</font>\n</blockquote>\n<p><br></p>\n<p>举例子说明：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test3.py</span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">' a test module '</span> </span><br><span class=\"line\"><span class=\"string\">'fgbhjknml'</span></span><br><span class=\"line\">__author__ = <span class=\"string\">'Directoree'</span></span><br><span class=\"line\">a = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(__doc__)</span><br><span class=\"line\">print(__author__)</span><br><span class=\"line\">print(dir())</span><br><span class=\"line\"></span><br><span class=\"line\">运行结果：</span><br><span class=\"line\"> a test module</span><br><span class=\"line\">Directoree</span><br><span class=\"line\">[<span class=\"string\">'__annotations__'</span>, <span class=\"string\">'__author__'</span>, <span class=\"string\">'__builtins__'</span>, <span class=\"string\">'__cached__'</span>, <span class=\"string\">'__doc__'</span>, </span><br><span class=\"line\"><span class=\"string\">'__file__'</span>, <span class=\"string\">'__loader__'</span>, <span class=\"string\">'__name__'</span>, <span class=\"string\">'__package__'</span>, <span class=\"string\">'__spec__'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'bbb'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">------------------------------------------------------------------------------------------</span><br><span class=\"line\">test3.py</span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> test3  </span><br><span class=\"line\">print(dir(test3))</span><br><span class=\"line\"></span><br><span class=\"line\">运行结果：</span><br><span class=\"line\">[<span class=\"string\">'__author__'</span>, <span class=\"string\">'__builtins__'</span>, <span class=\"string\">'__cached__'</span>, <span class=\"string\">'__doc__'</span>, <span class=\"string\">'__file__'</span>, <span class=\"string\">'__loader__'</span>, </span><br><span class=\"line\"><span class=\"string\">'__name__'</span>, <span class=\"string\">'__package__'</span>, <span class=\"string\">'__spec__'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'bbb'</span>]</span><br><span class=\"line\">[<span class=\"string\">'__author__'</span>, <span class=\"string\">'__builtins__'</span>, <span class=\"string\">'__cached__'</span>, <span class=\"string\">'__doc__'</span>, <span class=\"string\">'__file__'</span>, <span class=\"string\">'__loader__'</span>, </span><br><span class=\"line\"><span class=\"string\">'__name__'</span>, <span class=\"string\">'__package__'</span>, <span class=\"string\">'__spec__'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'bbb'</span>]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p><br></p>\n<h3 id=\"五-非公开函数\"><a href=\"#五-非公开函数\" class=\"headerlink\" title=\"五. 非公开函数\"></a><font color=\"#FF6347\" face=\"Comic sans MS\">五. 非公开函数</font></h3><blockquote>\n<p><font color=\"#FF7F00\" face=\"Microsoft YaHei\"><strong>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public</strong></font>。</p>\n</blockquote>\n<font face=\"Microsoft YaHei\">类似_xxx和__xxx这样的函数或变量就是非公开的（private），不应该被直接引用，比如_abc，__abc等；<br></font><br><font face=\"Microsoft YaHei\"></font>\n\n<font face=\"Microsoft YaHei\">之所以我们说，private函数和变量“不应该”被直接引用，而不是“不能”被直接引用，是因为Python并没有一种方法可以完全限制访问private函数或变量，但是，从编程习惯上不应该引用private函数或变量。</font>\n\n<p>private函数或变量不应该被别人引用，那它们有什么用呢？请看例子：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_private_1</span><span class=\"params\">(name)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello, %s'</span> % name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_private_2</span><span class=\"params\">(name)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hi, %s'</span> % name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">greeting</span><span class=\"params\">(name)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(name) &gt; <span class=\"number\">3</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _private_1(name)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _private_2(name)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<font face=\"Microsoft YaHei\">我们在模块里公开greeting()函数，而把内部逻辑用private函数隐藏起来了，这样，调用greeting()函数不用关心内部的private函数细节，这也是一种非常有用的代码封装和抽象的方法，即：<br></font>\n\n\n<font face=\"Microsoft YaHei\"><strong>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public。</strong><br></font>\n\n<hr>\n<hr>\n","prev":{"title":"Python-函数式编程","slug":"Python-FunctionalProgramming"},"next":{"title":"Python-生成器与迭代器","slug":"Python-generator-iterator"},"link":"Treecatee.gitgub.io/post/Python-Modules-Packages/","toc":[{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">一. 模块与包的意义</font>","id":"一-模块与包的意义","index":"1","children":[{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">1.1 什么是模块？</font>","id":"1-1-什么是模块？","index":"1.1"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">1.2 为什么要使用模块？</font>","id":"1-2-为什么要使用模块？","index":"1.2"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">1.3 什么是包？</font>","id":"1-3-什么是包？","index":"1.3"}]},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">二. 使用模块 -- 无包组织</font>","id":"二-使用模块-无包组织","index":"2","children":[{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">2.1 import 语句</font>","id":"2-1-import-语句","index":"2.1"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">2.2 from … import 语句</font>","id":"2-2-from-…-import-语句","index":"2.2"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">2.3 from … import * 语句</font>","id":"2-3-from-…-import-语句","index":"2.3"}]},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">三. 使用模块 -- 有包组织</font>","id":"三-使用模块-有包组织","index":"3"},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">四. __init__、__all__、__name__、__author__、__doc__、dir()函数</font>","id":"四-init-、-all-、-name-、-author-、-doc-、dir-函数","index":"4","children":[{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">4.1 __init__、__all__</font>","id":"4-1-init-、-all","index":"4.1"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">4.1 __name__、__main__</font>","id":"4-1-name-、-main","index":"4.2"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">4.3 __author__、__doc__</font>","id":"4-3-author-、-doc","index":"4.3"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">4.4 dir()函数</font>","id":"4-4-dir-函数","index":"4.4"}]},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">五. 非公开函数</font>","id":"五-非公开函数","index":"5"}],"copyright":{"author":"Treecatee","license":"不可转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"Treecatee.gitgub.io/post/Python-Modules-Packages/\" title=\"Python-模块和包\">Treecatee.gitgub.io/post/Python-Modules-Packages/</a>","published":"March 3, 2019"}}